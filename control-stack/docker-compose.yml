name: control-stack

networks:
    default:
        name: media-net
        external: true

services:
    dash:
        image: mauricenino/dashdot:latest
        container_name: dash
        privileged: true
        environment:
            DASHDOT_WIDGET_LIST: 'os,cpu,storage,ram,network,gpu'
            DASHDOT_ENABLE_CPU_TEMPS: 'true'
        volumes:
            - ./dash:/mnt/host:ro
        ports:
            - 3001:3001
        restart: unless-stopped

    homarr:
        image: ghcr.io/homarr-labs/homarr:latest
        container_name: homarr
        environment:
            - TZ=${TZ}
            - SECRET_ENCRYPTION_KEY=${SECRET_ENCRYPTION_KEY}
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - ./homarr:/appdata
        ports:
            - 7575:7575
        restart: unless-stopped
        
    portainer:
        image: portainer/portainer-ce:latest
        container_name: portainer
        environment:
            - TZ=${TZ}
        volumes:
            - ./portainer:/data
            - /var/run/docker.sock:/var/run/docker.sock
        ports:
            - 9443:9443
        restart: unless-stopped

    watchtower:
        image: containrrr/watchtower
        container_name: watchtower
        environment:
            - LOG_LEVEL=info
            - TZ=${TZ}
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
        restart: unless-stopped